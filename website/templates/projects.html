{% extends "index.html" %}

{% block title %}Project Work{% endblock %}

{% block banner %}
<!-- Banner -->
<section id="banner">
    <div class="content">
        <header>
            <h1>Project WOrk</h1>
            <span class="image object">
                <img src="{{ url_for('static', filename='images/shutterstock_725359189.jpg') }}" class="rounded mx-auto d-block" alt="" />
            </span>
        </header>
        <p>Welcome to my portfolio website. I have experience in data cleaning & manipulation, data visualization, supervised and unsupervised machine learning, project management, web development and machine learning deployment.
            This website was built using HTML, CSS & JS. Templates provided by HTML5 up
        </p>
        <ul class="actions">
            <li><a href="{{ url_for('views.about') }}" class="button big">Learn More</a></li>
        </ul>
    </div>
    
</section>
{% endblock %}



<!-- Projects Section -->
<section>
    <header class="major">
        <h2>Projects</h2>
    </header>

    <!-- GitHub Projects -->
    <div id="github-projects"></div>

    {% for project in projects %}
        <article>
            <h3>{{ project.title }}</h3>
            <p>{{ project.description }}</p>
        </article>
    {% endfor %}

    <!-- Pagination Controls -->
    <div class="pagination">
        {% if projects_data and projects_data.page > 1 %}
            <a href="{{ url_for('views.projects', page=projects_data.prev_num) }}">&laquo; Prev</a>
        {% endif %}
        {% if projects_data and projects_data.has_next %}
            <a href="{{ url_for('views.projects', page=projects_data.next_num) }}">Next &raquo;</a>
        {% endif %}
    </div>
</section>

{% block body %}
<script>
    // Fetch GitHub repositories using the GitHub API
    const username = "MakalaMabotja";
    const apiUrl = `https://api.github.com/users/${username}/repos`;

    fetch(apiUrl)
        .then(response => response.json())
        .then(repositories => {
            const githubProjectsDiv = document.getElementById("github-projects");

            repositories.forEach(repo => {
                const repoDiv = document.createElement("div");
                repoDiv.innerHTML = `<h3>${repo.name}</h3><p>${repo.description}</p><a href="${repo.html_url}" target="_blank">View on GitHub</a>`;
                githubProjectsDiv.appendChild(repoDiv);
            });
        })
        .catch(error => console.error("Error fetching GitHub repositories:", error));
</script>

{% endblock %}
